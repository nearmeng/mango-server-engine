/********************************************************************
**       This head file is generated by program,                   **
**            Please do not change it directly.                    **
********************************************************************/

#ifndef TFRAMEHEAD_H_
#define TFRAMEHEAD_H_


#ifndef TDR_METALIB_TFRAMEHEAD_VERSION 
#define TDR_METALIB_TFRAMEHEAD_VERSION 	28 /*version of metalib*/
#endif

#ifndef TDR_METALIB_TFRAMEHEAD_HASH 
#define TDR_METALIB_TFRAMEHEAD_HASH 	"8a4926faddca02b32f51b378014cc339" /*hash of metalib*/
#endif

/*   Define c types.   */
#ifndef TDR_CUSTOM_C_TYPES
#define TDR_CUSTOM_C_TYPES
    #include <stddef.h>
    #include <time.h>
    #include <sys/types.h>

    #if !defined(_WIN32) && !defined(_WIN64)

        #include <stdint.h>
        #include <inttypes.h>

    #else /*if !defined(_WIN32) && !defined(_WIN64)*/

        //The stdint declaras
        typedef  signed char  int8_t;
        typedef  short int16_t;
        typedef  int   int32_t;
        typedef unsigned char  uint8_t;
        typedef unsigned short uint16_t;
        typedef unsigned int   uint32_t;
        #if _MSC_VER >= 1300
            typedef unsigned long long 	uint64_t;
            typedef long long 	int64_t;
        #else /* _MSC_VER */
            typedef unsigned __int64	uint64_t;
            typedef __int64	int64_t;
        #endif /* _MSC_VER */

    #endif /*if !defined(_WIN32) && !defined(_WIN64)*/

    typedef int64_t tdr_longlong;
    typedef uint64_t tdr_ulonglong;
    typedef uint16_t tdr_wchar_t;  /**<Wchar基本数据类型*/
    typedef uint32_t tdr_date_t;	/**<data基本数据类型*/
    typedef uint32_t tdr_time_t;	/**<time基本数据类型*/
    typedef uint64_t tdr_datetime_t; /**<datetime基本数据类型*/
    typedef uint32_t tdr_ip_t;  /**<IPv4数据类型*/
#endif /*TDR_CUSTOM_C_TYPES*/


/*   User defined includes.   */
#include "auth_common.h"


/*   User defined macros.   */
#define TFRAMEHEAD_CMD_WEB_BOARDCAST                     	26 	/* WEBGAME，组播包，下行, 保留之前错误的宏，新的请用TFRAMEHEAD_CMD_WEB_BROADCAST */

/* TFRAMEHEAD_CMD_ID*/
enum tagTFRAMEHEAD_CMD_ID 
{
    TFRAMEHEAD_CMD_START = 0, 	/* 连接初始包,双向 */
    TFRAMEHEAD_CMD_STOP = 1, 	/* 连接断开包,双向 */
    TFRAMEHEAD_CMD_INPROC = 2, 	/* 通信包,双向 */
    TFRAMEHEAD_CMD_RELAY = 3, 	/* 重连包,双向 */
    TFRAMEHEAD_CMD_NOTIFY = 4, 	/* 预占连接包,双向 */
    TFRAMEHEAD_CMD_SETROUTING = 5, 	/* 路由跳转包,方向server->tconnd */
    TFRAMEHEAD_CMD_RSP_SETROUTING = 6, 	/* 路由跳转回应包 */
    TFRAMEHEAD_CMD_SETCONNLIMIT = 7, 	/* 服务器连接限制设置包,方向server->tconnd */
    TFRAMEHEAD_CMD_RSP_SETCONNLIMIT = 8, 	/* 服务器连接限制设置返回包 */
    TFRAMEHEAD_CMD_HEARTBEAT = 9, 	/* 用于服务器检查tconnd心跳包,双向 */
    TFRAMEHEAD_CMD_EXGVER = 10, 	/* 逻辑服务器向tconnd上报其版本,双向 */
    TFRAMEHEAD_CMD_WAITNUM_REQ = 11, 	/* 服务器请求当前等待连接的客户端数量,方向server->tconnd */
    TFRAMEHEAD_CMD_WAITNUM_RSP = 12, 	/* 服务器请求当前等待连接的客户端数量的应答包,方向tconnd->server */
    TFRAMEHEAD_CMD_SET_WAITCTR = 13, 	/* 排队等待控制消息, 方向server->tconnd */
    TFRAMEHEAD_CMD_WEBSTART = 20, 	/* WEBGAME，连接初始包，双向 */
    TFRAMEHEAD_CMD_WEBINPROC = 21, 	/* WEBGAME，正常通信，上下行 */
    TFRAMEHEAD_CMD_WEBSTOP = 22, 	/* WEBGAME，连接断开，上行 */
    TFRAMEHEAD_CMD_WEBRESP = 23, 	/* WEBGAME，通用下行包，下行 */
    TFRAMEHEAD_CMD_REGISTER_ROUTING = 24, 	/* 服务器设置业务路由请求, server->tconnd */
    TFRAMEHEAD_CMD_TCONND_REBOOT = 25, 	/* tconnd启动的时候发送,tconnd->server */
    TFRAMEHEAD_CMD_WEB_BROADCAST = 26, 	/* WEBGAME，组播包，下行 */
    TFRAMEHEAD_CMD_WEB_BROADCAST_ALL = 27, 	/* WEBGAME, 广播包，下行 */
    TFRAMEHEAD_CMD_WEB_BROADCAST_ALL_RSP = 28, 	/* WEBGAEM,广播应答包，用于回应广播包是否发送成功，上行 */
    TFRAMEHEAD_CMD_AUTH_REFRESH_NOTIFY = 29, 	/* 票据刷新通知 */
    TFRAMEHEAD_CMD_TCONND_STOP_NOTIFY = 30, 	/* 对tconnd执行STOP的时候发送,tconnd->server */
    TFRAMEHEAD_CMD_TCONND_PROBE_SVR = 31, 	/* TCONND检测SVR状态，与HEARTBEAT的区别: HEARTBEAT是GAMESVR发起，此包是TCONND发起 */
    TFRAMEHEAD_CMD_CLUSTER_SETROUTING = 32, 	/* 集群化模式下的路由跳转包,方向server->tconnd */
    TFRAMEHEAD_CMD_RSP_CLUSTER_SETROUTING = 33, 	/* 集群化模式下的路由跳转回应包，方向tconnd->server */
    TFRAMEHEAD_CMD_MULTICAST_REMOVE_GROUP_REQ = 36, 	/* 删除组播组请求 */
    TFRAMEHEAD_CMD_MULTICAST_REMOVE_GROUP_RESP = 37, 	/* 删除组播组响应 */
    TFRAMEHEAD_CMD_MULTICAST_REMOVE_IDENT_REQ = 38, 	/* 组播组删除连接请求 */
    TFRAMEHEAD_CMD_MULTICAST_REMOVE_IDENT_RESP = 39, 	/* 组播组删除连接响应 */
    TFRAMEHEAD_CMD_MULTICAST_ADD_IDENT_REQ = 40, 	/* 往组播组添加连接请求 */
    TFRAMEHEAD_CMD_MULTICAST_ADD_IDENT_RESP = 41, 	/* 往组播组添加连接响应 */
    TFRAMEHEAD_CMD_MULTICAST_DELIVER_MSG_REQ = 42, 	/* 发送组播消息 */
    TFRAMEHEAD_CMD_MULTICAST_QUERY_IDENT_REQ = 43, 	/* 查询某个组内所有连接请求 */
    TFRAMEHEAD_CMD_MULTICAST_QUERY_IDENT_RESP = 44, 	/* 查询某个组内所有连接响应 */
    TFRAMEHEAD_CMD_BROADCAST = 45, 	/* 广播包，下行 */
    TFRAMEHEAD_CMD_BROADCAST_RSP = 46, 	/* 广播应答包，用于回应广播包是否发送成功，上行 */
};

/* TCONNAPI_AUTH*/
enum tagTCONNAPI_AUTH 
{
    TCONNAPI_AUTH_NONE = 0, 
    TCONNAPI_AUTH_QQV1 = 1, 
    TCONNAPI_AUTH_QQV2 = 2, 
    TCONNAPI_AUTH_QQUNIFIED = 3, 
    TCONNAPI_AUTH_AP = 4, 
};

/* TCONNAPI_ACCOUNT*/
enum tagTCONNAPI_ACCOUNT 
{
    TCONNAPI_ACCOUNT_NONE = 0, 
    TCONNAPI_ACCOUNT_QQ_UIN = 1, 
    TCONNAPI_ACCOUNT_QQ_UIN_PTLOGIN = 2, 
    TCONNAPI_ACCOUNT_WX_OPENID = 4098, 
    TCONNAPI_ACCOUNT_QQ_OPENID = 4099, 
    TCONNAPI_ACCOUNT_IOS_GUEST = 8193, 	/* IOS游客模式 */
    TCONNAPI_ACCOUNT_FACEBOOK = 32769, 
    TCONNAPI_ACCOUNT_GOOGLEPLAY = 32770, 
    TCONNAPI_ACCOUNT_GOOGLEPLUS = 32771, 
    TCONNAPI_ACCOUNT_APPLE_GAMECENTER = 32772, 
    TCONNAPI_ACCOUNT_GMEI = 32775, 
    TCONNAPI_ACCOUNT_APP37WAN = 32776, 
    TCONNAPI_ACCOUNT_BEETALK = 32777, 
    TCONNAPI_ACCOUNT_KAKAO = 32784, 
    TCONNAPI_ACCOUNT_COSDK = 32800, 
    TCONNAPI_ACCOUNT_LINK = 32816, 
    TCONNAPI_ACCOUNT_GARENA = 32817, 
    TCONNAPI_ACCOUNT_TWITTER = 32818, 
    TCONNAPI_ACCOUNT_EMAIL = 32819, 
    TCONNAPI_ACCOUNT_TOY = 32820, 
    TCONNAPI_ACCOUNT_LINE = 32821, 
    TCONNAPI_ACCOUNT_EFUN = 32822, 
};

/* TCONNAPI_CLIENT_TYPE*/
enum tagTCONNAPI_CLIENT_TYPE 
{
    TCONNAPI_CLIENT_TYPE_PC = 0, 	/* PC客户端 */
    TCONNAPI_CLIENT_TYPE_MOBILE = 1, 	/* 移动终端 */
    TCONNAPI_CLIENT_TYPE_ANDROID = 101, 	/* 移动终端android */
    TCONNAPI_CLIENT_TYPE_IOS = 102, 	/* 移动终端ios */
};

/* TFRAMEHEAD_CLUSTER_SETROUTING_TYPE*/
enum tagTFRAMEHEAD_CLUSTER_SETROUTING_TYPE 
{
    TFRAMEHEAD_CLUSTER_SETROUTING_TYPE_SPECIFY_SERVER = 0, 	/* 指定具体的gamesvr */
    TFRAMEHEAD_CLUSTER_SETROUTING_TYPE_SPECIFY_ZONE = 1, 	/* 指定区服跳转 */
};
#define TFRAMEHEAD_MAX_BATCH_IDENT                       	512 	/* 最大组播个数 */
#define TFRAMEHEAD_EXTRA_IP                              	1
#define TFRAMEHEAD_TIMESTAMP_TIMEVAL                     	1
#define SERLIZER_NAME_LEN                                	32
#define NETTRANS_NAME_LEN                                	32
#define TFRAMEHEAD_SET_ROUTING                           	1
#define MAX_BROADCAST_ALL_MSG_LEN                        	10240 	/* 一个广播消息包的最大大小 */
#define MAX_BROADCAST_ALL_MSG_NUM                        	100 	/* 广播消息包缓冲区能容纳的广播消息包的最大个数 */
#define MAX_CLIENT_NUM_ONCE_SEND                         	100 	/* 一次给多少个客户端发送广播包 */

/* TFRAMEHEAD_STOP_REASON*/
enum tagTFRAMEHEAD_STOP_REASON 
{
    TFRAMEHEAD_REASON_NONE = 0, 	/* success */
    TFRAMEHEAD_REASON_IDLE_CLOSE = 1, 	/* 连接空闲关闭 */
    TFRAMEHEAD_REASON_PEER_CLOSE = 2, 	/* 客户端通过关闭SOCKET主动关闭 */
    TFRAMEHEAD_REASON_NETWORK_FAIL = 3, 	/* 网络异常关闭，很有可能是客户端崩溃导致 */
    TFRAMEHEAD_REASON_BAD_PKGLEN = 4, 	/* 请求包长度异常关闭 */
    TFRAMEHEAD_REASON_EXCEED_LIMIT = 5, 	/* 客户端发送速度超过限制 */
    TFRAMEHEAD_REASON_TCONND_SHUTDOWN = 6, 	/* tconnd重启 */
    TFRAMEHEAD_REASON_SELF_CLOSE = 7, 	/* 服务器主动下发关闭 */
    TFRAMEHEAD_REASON_AUTH_FAIL = 8, 	/* 客户端连接验证失败 */
    TFRAMEHEAD_REASON_SYNACK_FAIL = 9, 	/* 客户端三次握手验证失败 */
    TFRAMEHEAD_REASON_WR_BLOCKED = 10, 	/* socket发送缓冲区写满 */
    TFRAMEHEAD_REASON_SEQUENCE_INVALID = 11, 	/* 上行包序列号非法 */
    TFRAMEHEAD_REASON_TRANS_RELAY = 12, 	/* 预占由于重连释放 */
    TFRAMEHEAD_REASON_TRANS_LOST = 13, 	/* 连接已经释放 */
    TFRAMEHEAD_REASON_RELAY_FAIL = 14, 	/* 客户端重连验证失败 */
    TFRAMEHEAD_REASON_SESSION_RENEW_FAIL = 15, 	/* session key 续期失败 */
    TFRAMEHEAD_REASON_RECV_BUFF_FULL = 16, 	/* 接收缓存满 */
    TFRAMEHEAD_REASON_UNPACK_FAIL = 17, 	/* tconnd 客户端协议解码失败 */
    TFRAMEHEAD_REASON_INVALID_PKG = 18, 	/* 数据包非法 */
    TFRAMEHEAD_REASON_INVALID_SKEY = 19, 	/* SKEY失效，用户非登录状态。 */
    TFRAMEHEAD_REASON_VERIFY_DUP = 20, 	/* 其他连接已在校验，当前连接暂时不能校验。 */
    TFRAMEHEAD_REASON_CLIENT_CLOSE = 21, 	/* 客户端通过控制协议主动关闭 */
    TFRAMEHEAD_REASON_PRE_RELAY_FAIL = 22, 	/* 客户端跨服跳转端重连失败 */
    TFRAMEHEAD_REASON_SYSTEM_ERROR = 23, 	/* 系统异常 */
    TFRAMEHEAD_REASON_CLIENT_RECONNECT = 24, 	/* 客户端发生重连操作，需要关闭原来链接 */
    TFRAMEHEAD_REASON_GEN_KEY_FAIL = 25, 	/* DH方法生成KEY失败 */
    TFRAMEHEAD_REASON_ID_MAPPING_FAIL = 26, 	/* 账号映射失败 */
    TFRAMEHEAD_REASON_SVR_CONFIRM_TIME_OUT = 27, 	/* 等待SVR返回START包或者RELAY包超时 */
    TFRAMEHEAD_REASON_ROUTING_FAIL = 28, 	/* 路由组件调用失败 */
    TFRAMEHEAD_REASON_TCONND_UNREACHABLE = 29, 	/* TCONND不可达，集群化PROXY模式下专用 */
    TFRAMEHEAD_REASON_LOGIN_ON_NEW_SVR = 30, 	/* 在新的GAMESVR中登录 */
    TFRAMEHEAD_REASON_CAN_NOT_FIND_ROUTE = 31, 	/* 集群化模式下，寻找不到后端的路由 */
    TFRAMEHEAD_REASON_CLUSTER_WAIT_QUEUE_TIME_OUT = 32, 	/* 集群化模式下，等待排队通知超时 */
    TFRAMEHEAD_REASON_CLUSTER_PUSH_QUEUE_FAILED = 33, 	/* 集群化模式下，入队列失败 */
    TFRAMEHEAD_REASON_AUTH_PARAM_INVALID_IN_REQUEST = 34, 	/* websocket模式下，客户端鉴权请求参数缺失或非法 */
    TFRAMEHEAD_REASON_GET_CLUSTER_ROUTE_FAILED = 35, 	/* websocket集群模式下，获取路由信息失败 */
    TFRAMEHEAD_REASON_COUNT = 36, 	/* 加错误码后记得改内部和外部两个tconnapi.cpp里的tconnd_close_string[] */
};

/* TFRAMEHEAD_SETROUTING_RESULT*/
enum tagTFRAMEHEAD_SETROUTING_RESULT 
{
    SETROUTING_RESULT_SUCCESS = 0, 	/* 成功 */
    SETROUTING_RESULT_FAIL_IDX_INVALID = 1, 	/* framehead中的iConnIdx非法 */
    SETROUTING_RESULT_FAIL_SERLIZER_UNKNOWN = 2, 	/* tbus模式下序列化器找不到 */
    SETROUTING_RESULT_FAIL_SERLIZER_INVALID = 3, 	/* tbus模式下序列化器非法 */
    SETROUTING_RESULT_FAIL_UNSUPPORT_ROUTE_TYPE = 4, 	/* 非法的route type */
    SETROUTING_RESULT_FAIL_SVR_NOT_MATCH = 5, 	/* 设置路由的server非客户端的归属server */
};

/* TCONND_MULTICAST_RESULT*/
enum tagTCONND_MULTICAST_RESULT 
{
    MULTICAST_RESULT_SUCCESS = 0, 	/* 成功 */
    MULTICAST_RESULT_GROUP_EXIST = 1, 	/* 组播组已存在 */
    MULTICAST_RESULT_GROUP_NOT_EXIST = 2, 	/* 组播组不存在 */
    MULTICAST_RESULT_IDENT_EXIST = 3, 	/* 连接信息已存在 */
    MULTICAST_RESULT_IDENT_NOT_EXIST = 4, 	/* 连接信息不存在 */
    MULTICAST_RESULT_GROUP_FULL = 5, 	/* 组播组的数量达到上限 */
    MULTICAST_RESULT_IDENT_FULL = 6, 	/* 组播组内的连接数量达到上限 */
    MULTICAST_RESULT_CONNECTION_NOT_EXIST = 7, 	/* 不存在的连接 */
    MULTICAST_RESULT_GROUP_NAME_INVALID = 8, 	/* 组名为空时非法 */
    MULTICAST_RESULT_SESSION_CONNECTION_NOT_MATCH = 9, 	/* 所在的会话和连接id不匹配 */
    MULTICAST_RESULT_SESSION_NOT_ACTIVE = 10, 	/* 会话不是active状态的 */
    MULTICAST_RESULT_CONN_GROUP_EXCEED = 11, 	/* 一个连接最多可以放入128个组播组 */
    MULTICAST_RESULT_SYS_ERR = 20, 	/* 内部未知错误 */
};

/* TFRAMEHEAD_SETCONNLIMIT_RESULT*/
enum tagTFRAMEHEAD_SETCONNLIMIT_RESULT 
{
    SETCONNLIMIT_RESULT_SUCCESS = 0, 
    SETCONNLIMIT_RESULT_FAIL_INVALID_DATA = 1, 
};

/* TFRAMEHEAD_RELAYTYPE*/
enum tagTFRAMEHEAD_RELAYTYPE 
{
    TFRAMEHEAD_JUMP_SERVER_RELAY = 1, 	/* 跨服重连 */
    TFRAMEHEAD_NETWORK_FAILURE_RELAY = 2, 	/* 断线重连 */
    TFRAMEHEAD_CLIENT_CRASH_RELAY = 3, 	/* 预留 */
};

/* TFRAMEHEAD_RELAYFLAG*/
enum tagTFRAMEHEAD_RELAYFLAG 
{
    TFRAMEHEAD_RELAYFLAG_RECONN = 1, 	/* 断线重连 */
    TFRAMEHEAD_RELAYFLAG_JUMP = 2, 	/* 跨服跳转,为了兼容旧模式上面两个类型值相反 */
};
#define TFRAMEHEAD_CONNECTKEY_LEN                        	16
#define TFRAMEHEAD_IDENTITY_LEN                          	16
#define TFRAMEHEAD_MAX_SIG_LEN                           	1024
#define TFRAMEHEAD_MAX_ROUTING_ARGS_LEN                  	128

/* TFRAMEHEAD_FLAG*/
enum tagTFRAMEHEAD_FLAG 
{
    TFRAMEHEAD_FLAG_RELIABLE = 1, 	/* 表示下行包是否可靠,仅对可靠UDP方式有效 */
};

/* TFRAMEHEAD_CMD_BROADCAST_ALL_RESULT*/
enum tagTFRAMEHEAD_CMD_BROADCAST_ALL_RESULT 
{
    BROADCAST_ALL_RESULT_SUCCESS = 0, 	/* 接收广播包成功 */
    BROADCAST_ALL_RESULT_FAIL_MSG_BIGGER = 1, 	/* 广播包大小过大 */
    BROADCAST_ALL_RESULT_FAIL_NO_BUFF = 2, 	/* 广播包缓冲区已满 */
};

/* TFRAMEHEAD_ID*/
enum tagTFRAMEHEAD_ID 
{
    TFRAMEHEAD_ID_NONE = 0, 
    TFRAMEHEAD_ID_UINT32 = 1, 
    TFRAMEHEAD_ID_UINT64 = 2, 
    TFRAMEHEAD_ID_STRING = 3, 
};
#define TWEB_SKEY_LEN                                    	128 	/* SKEY长度，10+1，留了一个'\0'的位置。 */
#define TWEB_ACCOUNT_LEN                                 	31 	/* 帐户名称，留了'\0'的位置。 */
#define TWEB_TOKEN_LEN                                   	201 	/* Token长度，留了一个'\0'的位置。 */
#define TWEB_PASSPORT_LEN                                	20 	/* 增值位，20byte */
#define TCONND_MULTICAST_GROUPNAME_LEN                   	64 	/* 组播组名字最大允许长度64字节 */

/* TWEB_USERINFO_TYPE*/
enum tagTWEB_USERINFO_TYPE 
{
    TWEB_USER_UNKNOWN = 0, 	/* 未知状态，用于初始默认值 */
    TWEB_USER_QQSIMPLE = 1, 
    TWEB_USER_COMMON = 2, 
};
#define TFRAMEHEAD_MAX_ID_LENGTH                         	256 	/* 字符串账号最大长度 */
#define TCONND_WAP_MAX_KEY_LEN                           	30
#define TCONND_WAP_MAX_VALUE_LEN                         	200
#define TCONND_WAP_MAX_URI_LEN                           	1024
#define TCONND_WAP_MAX_BODY_LEN                          	102400
#define TCONND_WAP_MAX_PARAMS_COU                        	20
#define TCONND_WAP_MAX_HEADERS_COU                       	20
#define TCONND_WAP_MAX_COOKIES_COU                       	20


/*   Structs/unions prototype.   */
struct tagTFRAMEHEADAuthData;
typedef struct tagTFRAMEHEADAuthData                               	TFRAMEHEADAUTHDATA;
typedef struct tagTFRAMEHEADAuthData                               	*LPTFRAMEHEADAUTHDATA;

struct tagQQUserSimp;
typedef struct tagQQUserSimp                                       	QQUSERSIMP;
typedef struct tagQQUserSimp                                       	*LPQQUSERSIMP;

struct tagCommUser;
typedef struct tagCommUser                                         	COMMUSER;
typedef struct tagCommUser                                         	*LPCOMMUSER;

union tagWebUserInfo;
typedef union  tagWebUserInfo                                      	WEBUSERINFO;
typedef union  tagWebUserInfo                                      	*LPWEBUSERINFO;

union tagTFRAMEHEADIDValue;
typedef union  tagTFRAMEHEADIDValue                                	TFRAMEHEADIDVALUE;
typedef union  tagTFRAMEHEADIDValue                                	*LPTFRAMEHEADIDVALUE;

struct tagTFRAMEHEADAccount;
typedef struct tagTFRAMEHEADAccount                                	TFRAMEHEADACCOUNT;
typedef struct tagTFRAMEHEADAccount                                	*LPTFRAMEHEADACCOUNT;

struct tagTKeyValue2;
typedef struct tagTKeyValue2                                       	TKEYVALUE2;
typedef struct tagTKeyValue2                                       	*LPTKEYVALUE2;

struct tagTParams2;
typedef struct tagTParams2                                         	TPARAMS2;
typedef struct tagTParams2                                         	*LPTPARAMS2;

struct tagTHeaders2;
typedef struct tagTHeaders2                                        	THEADERS2;
typedef struct tagTHeaders2                                        	*LPTHEADERS2;

struct tagTCookies2;
typedef struct tagTCookies2                                        	TCOOKIES2;
typedef struct tagTCookies2                                        	*LPTCOOKIES2;

struct tagTWapUpload2;
typedef struct tagTWapUpload2                                      	TWAPUPLOAD2;
typedef struct tagTWapUpload2                                      	*LPTWAPUPLOAD2;

struct tagTWapDownload2;
typedef struct tagTWapDownload2                                    	TWAPDOWNLOAD2;
typedef struct tagTWapDownload2                                    	*LPTWAPDOWNLOAD2;

struct tagTIPInfo;
typedef struct tagTIPInfo                                          	TIPINFO;
typedef struct tagTIPInfo                                          	*LPTIPINFO;

union tagTFrameHeadData;
typedef union  tagTFrameHeadData                                   	TFRAMEHEADDATA;
typedef union  tagTFrameHeadData                                   	*LPTFRAMEHEADDATA;

struct tagTFrameAuthQQ;
typedef struct tagTFrameAuthQQ                                     	TFRAMEAUTHQQ;
typedef struct tagTFrameAuthQQ                                     	*LPTFRAMEAUTHQQ;

struct tagTFrameAuthAPS;
typedef struct tagTFrameAuthAPS                                    	TFRAMEAUTHAPS;
typedef struct tagTFrameAuthAPS                                    	*LPTFRAMEAUTHAPS;

union tagTFrameAuthData;
typedef union  tagTFrameAuthData                                   	TFRAMEAUTHDATA;
typedef union  tagTFrameAuthData                                   	*LPTFRAMEAUTHDATA;

struct tagJumpRelayData;
typedef struct tagJumpRelayData                                    	JUMPRELAYDATA;
typedef struct tagJumpRelayData                                    	*LPJUMPRELAYDATA;

union tagRelayData;
typedef union  tagRelayData                                        	RELAYDATA;
typedef union  tagRelayData                                        	*LPRELAYDATA;

struct tagTFrameCmdStart;
typedef struct tagTFrameCmdStart                                   	TFRAMECMDSTART;
typedef struct tagTFrameCmdStart                                   	*LPTFRAMECMDSTART;

struct tagTFrameCmdStop;
typedef struct tagTFrameCmdStop                                    	TFRAMECMDSTOP;
typedef struct tagTFrameCmdStop                                    	*LPTFRAMECMDSTOP;

struct tagTFrameIdent;
typedef struct tagTFrameIdent                                      	TFRAMEIDENT;
typedef struct tagTFrameIdent                                      	*LPTFRAMEIDENT;

struct tagTFrameCmdInProc;
typedef struct tagTFrameCmdInProc                                  	TFRAMECMDINPROC;
typedef struct tagTFrameCmdInProc                                  	*LPTFRAMECMDINPROC;

struct tagTFrameCmdMultiCastRemoveGroupReq;
typedef struct tagTFrameCmdMultiCastRemoveGroupReq                 	TFRAMECMDMULTICASTREMOVEGROUPREQ;
typedef struct tagTFrameCmdMultiCastRemoveGroupReq                 	*LPTFRAMECMDMULTICASTREMOVEGROUPREQ;

struct tagTFrameCmdMultiCastRemoveGroupResp;
typedef struct tagTFrameCmdMultiCastRemoveGroupResp                	TFRAMECMDMULTICASTREMOVEGROUPRESP;
typedef struct tagTFrameCmdMultiCastRemoveGroupResp                	*LPTFRAMECMDMULTICASTREMOVEGROUPRESP;

struct tagTFrameCmdMultiCastAddIdentReq;
typedef struct tagTFrameCmdMultiCastAddIdentReq                    	TFRAMECMDMULTICASTADDIDENTREQ;
typedef struct tagTFrameCmdMultiCastAddIdentReq                    	*LPTFRAMECMDMULTICASTADDIDENTREQ;

struct tagTFrameCmdMultiCastAddIdentResp;
typedef struct tagTFrameCmdMultiCastAddIdentResp                   	TFRAMECMDMULTICASTADDIDENTRESP;
typedef struct tagTFrameCmdMultiCastAddIdentResp                   	*LPTFRAMECMDMULTICASTADDIDENTRESP;

struct tagTFrameCmdMultiCastRemoveIdentReq;
typedef struct tagTFrameCmdMultiCastRemoveIdentReq                 	TFRAMECMDMULTICASTREMOVEIDENTREQ;
typedef struct tagTFrameCmdMultiCastRemoveIdentReq                 	*LPTFRAMECMDMULTICASTREMOVEIDENTREQ;

struct tagTFrameCmdMultiCastRemoveIdentResp;
typedef struct tagTFrameCmdMultiCastRemoveIdentResp                	TFRAMECMDMULTICASTREMOVEIDENTRESP;
typedef struct tagTFrameCmdMultiCastRemoveIdentResp                	*LPTFRAMECMDMULTICASTREMOVEIDENTRESP;

struct tagTFrameCmdMultiCastQueryIdentReq;
typedef struct tagTFrameCmdMultiCastQueryIdentReq                  	TFRAMECMDMULTICASTQUERYIDENTREQ;
typedef struct tagTFrameCmdMultiCastQueryIdentReq                  	*LPTFRAMECMDMULTICASTQUERYIDENTREQ;

struct tagTFrameCmdMultiCastQueryIdentResp;
typedef struct tagTFrameCmdMultiCastQueryIdentResp                 	TFRAMECMDMULTICASTQUERYIDENTRESP;
typedef struct tagTFrameCmdMultiCastQueryIdentResp                 	*LPTFRAMECMDMULTICASTQUERYIDENTRESP;

struct tagTFrameCmdMultiCastDeliverMsgReq;
typedef struct tagTFrameCmdMultiCastDeliverMsgReq                  	TFRAMECMDMULTICASTDELIVERMSGREQ;
typedef struct tagTFrameCmdMultiCastDeliverMsgReq                  	*LPTFRAMECMDMULTICASTDELIVERMSGREQ;

struct tagTFrameCmdRelay;
typedef struct tagTFrameCmdRelay                                   	TFRAMECMDRELAY;
typedef struct tagTFrameCmdRelay                                   	*LPTFRAMECMDRELAY;

struct tagTFrameCmdSetRouting;
typedef struct tagTFrameCmdSetRouting                              	TFRAMECMDSETROUTING;
typedef struct tagTFrameCmdSetRouting                              	*LPTFRAMECMDSETROUTING;

struct tagTFrameCmdClusterSetRouting;
typedef struct tagTFrameCmdClusterSetRouting                       	TFRAMECMDCLUSTERSETROUTING;
typedef struct tagTFrameCmdClusterSetRouting                       	*LPTFRAMECMDCLUSTERSETROUTING;

struct tagTFrameCmdSetRoutingRsp;
typedef struct tagTFrameCmdSetRoutingRsp                           	TFRAMECMDSETROUTINGRSP;
typedef struct tagTFrameCmdSetRoutingRsp                           	*LPTFRAMECMDSETROUTINGRSP;

struct tagTFrameCmdClusterSetRoutingRsp;
typedef struct tagTFrameCmdClusterSetRoutingRsp                    	TFRAMECMDCLUSTERSETROUTINGRSP;
typedef struct tagTFrameCmdClusterSetRoutingRsp                    	*LPTFRAMECMDCLUSTERSETROUTINGRSP;

union tagTRoutingOption;
typedef union  tagTRoutingOption                                   	TROUTINGOPTION;
typedef union  tagTRoutingOption                                   	*LPTROUTINGOPTION;

struct tagTFrameCmdNotify;
typedef struct tagTFrameCmdNotify                                  	TFRAMECMDNOTIFY;
typedef struct tagTFrameCmdNotify                                  	*LPTFRAMECMDNOTIFY;

struct tagTFrameCmdSetConnLimit;
typedef struct tagTFrameCmdSetConnLimit                            	TFRAMECMDSETCONNLIMIT;
typedef struct tagTFrameCmdSetConnLimit                            	*LPTFRAMECMDSETCONNLIMIT;

struct tagTFrameCmdSetConnLimitRsp;
typedef struct tagTFrameCmdSetConnLimitRsp                         	TFRAMECMDSETCONNLIMITRSP;
typedef struct tagTFrameCmdSetConnLimitRsp                         	*LPTFRAMECMDSETCONNLIMITRSP;

struct tagTFrameCmdExgVer;
typedef struct tagTFrameCmdExgVer                                  	TFRAMECMDEXGVER;
typedef struct tagTFrameCmdExgVer                                  	*LPTFRAMECMDEXGVER;

struct tagTFrameCmdWaitNumRsp;
typedef struct tagTFrameCmdWaitNumRsp                              	TFRAMECMDWAITNUMRSP;
typedef struct tagTFrameCmdWaitNumRsp                              	*LPTFRAMECMDWAITNUMRSP;

struct tagTFrameCmdSetWaitCtr;
typedef struct tagTFrameCmdSetWaitCtr                              	TFRAMECMDSETWAITCTR;
typedef struct tagTFrameCmdSetWaitCtr                              	*LPTFRAMECMDSETWAITCTR;

struct tagTFrameCmdRoutingRegister;
typedef struct tagTFrameCmdRoutingRegister                         	TFRAMECMDROUTINGREGISTER;
typedef struct tagTFrameCmdRoutingRegister                         	*LPTFRAMECMDROUTINGREGISTER;

struct tagTFrameCmdWebCommReq;
typedef struct tagTFrameCmdWebCommReq                              	TFRAMECMDWEBCOMMREQ;
typedef struct tagTFrameCmdWebCommReq                              	*LPTFRAMECMDWEBCOMMREQ;

struct tagTFrameCmdWebStartReq;
typedef struct tagTFrameCmdWebStartReq                             	TFRAMECMDWEBSTARTREQ;
typedef struct tagTFrameCmdWebStartReq                             	*LPTFRAMECMDWEBSTARTREQ;

struct tagTFrameCmdWebStopReq;
typedef struct tagTFrameCmdWebStopReq                              	TFRAMECMDWEBSTOPREQ;
typedef struct tagTFrameCmdWebStopReq                              	*LPTFRAMECMDWEBSTOPREQ;

struct tagTFrameCmdWebBoardcast;
typedef struct tagTFrameCmdWebBoardcast                            	TFRAMECMDWEBBOARDCAST;
typedef struct tagTFrameCmdWebBoardcast                            	*LPTFRAMECMDWEBBOARDCAST;

struct tagTFrameCmdWebBroadcastAll;
typedef struct tagTFrameCmdWebBroadcastAll                         	TFRAMECMDWEBBROADCASTALL;
typedef struct tagTFrameCmdWebBroadcastAll                         	*LPTFRAMECMDWEBBROADCASTALL;

struct tagTFrameCmdWebBroadcastAllRsp;
typedef struct tagTFrameCmdWebBroadcastAllRsp                      	TFRAMECMDWEBBROADCASTALLRSP;
typedef struct tagTFrameCmdWebBroadcastAllRsp                      	*LPTFRAMECMDWEBBROADCASTALLRSP;

struct tagTFrameCmdAuthRefreshNotify;
typedef struct tagTFrameCmdAuthRefreshNotify                       	TFRAMECMDAUTHREFRESHNOTIFY;
typedef struct tagTFrameCmdAuthRefreshNotify                       	*LPTFRAMECMDAUTHREFRESHNOTIFY;

struct tagTFrameCmdTconndProbe;
typedef struct tagTFrameCmdTconndProbe                             	TFRAMECMDTCONNDPROBE;
typedef struct tagTFrameCmdTconndProbe                             	*LPTFRAMECMDTCONNDPROBE;

union tagTFrameCmdData;
typedef union  tagTFrameCmdData                                    	TFRAMECMDDATA;
typedef union  tagTFrameCmdData                                    	*LPTFRAMECMDDATA;

struct tagTTimeVal;
typedef struct tagTTimeVal                                         	TTIMEVAL;
typedef struct tagTTimeVal                                         	*LPTTIMEVAL;

union tagTTimeStampData;
typedef union  tagTTimeStampData                                   	TTIMESTAMPDATA;
typedef union  tagTTimeStampData                                   	*LPTTIMESTAMPDATA;

struct tagTFrameHead;
typedef struct tagTFrameHead                                       	TFRAMEHEAD;
typedef struct tagTFrameHead                                       	*LPTFRAMEHEAD;

/*   Define structs/unions.   */
#pragma pack(1)

/* 认证数据 */
struct tagTFRAMEHEADAuthData
{
    uint16_t wAuthLen;                               
    uint8_t szAuthInfo[TFRAMEHEAD_MAX_SIG_LEN];      
};

/* QQ用户的识别信息，简单版 */
struct tagQQUserSimp
{
    uint32_t dwUin;                                   	/*   QQ号 */
    char szSKey[TWEB_SKEY_LEN];                       	/*   ptlogin session key */
};

/* 通用的用户的识别信息 */
struct tagCommUser
{
    uint32_t dwId;                                    	/*   用户身份ID，通常用于系统对接 */
    char szAccount[TWEB_ACCOUNT_LEN];                 	/*   用户帐户，用于登录 */
    char szToken[TWEB_TOKEN_LEN];                     	/*   用户凭据，主要用于验证用户登录状态和身份 */
};

union tagWebUserInfo
{
    QQUSERSIMP stQQUserSimple;                        	/* TWEB_USER_QQSIMPLE,   */
    COMMUSER stCommonUser;                            	/* TWEB_USER_COMMON,   */
};

/* ID */
union tagTFRAMEHEADIDValue
{
    uint32_t dwUINT32;                                	/* TFRAMEHEAD_ID_UINT32,  uint32格式 */
    uint64_t ullUINT64;                               	/* TFRAMEHEAD_ID_UINT64,  uint64格式 */
    char szSTRING[TFRAMEHEAD_MAX_ID_LENGTH];          	/* TFRAMEHEAD_ID_STRING,  字符串格式 */
};

/* 用户账号 */
struct tagTFRAMEHEADAccount
{
    uint16_t wType;                                   	/*   账号类型 ,0 表示无账号信息，1表示QQ，4098表示微信OPENID，4099表示手Q OPENID，参考TCONNAPI_ACCOUNT Bind Macrosgroup:TCONNAPI_ACCOUNT,*/
    uint8_t bFormat;                                  	/*   账号格式 Bind Macrosgroup:TFRAMEHEAD_ID,*/
    TFRAMEHEADIDVALUE stValue;                        	/*   账号值 */
    uint64_t ullUid;                                  	/*  Ver.19 经过TCONND帐号映射的ID，为0时表示无效 */
};

/* Key-Value对 */
struct tagTKeyValue2
{
    char szKey[TCONND_WAP_MAX_KEY_LEN];              
    char szValue[TCONND_WAP_MAX_VALUE_LEN];          
};

/* URI参数 */
struct tagTParams2
{
    uint8_t bCount;                                   	/*   个数 */
    TKEYVALUE2 astParams[TCONND_WAP_MAX_PARAMS_COU]; 
};

/* Header */
struct tagTHeaders2
{
    uint8_t bCount;                                   	/*   个数 */
    TKEYVALUE2 astHeaders[TCONND_WAP_MAX_HEADERS_COU];
};

/* Cookies */
struct tagTCookies2
{
    uint8_t bCount;                                   	/*   个数 */
    TKEYVALUE2 astCookies[TCONND_WAP_MAX_COOKIES_COU];
};

/* WAP通信上行包 */
struct tagTWapUpload2
{
    int8_t chUserType;                                	/*    Bind Macrosgroup:TWEB_USERINFO_TYPE,*/
    WEBUSERINFO stUser;                              
    char szURI[TCONND_WAP_MAX_URI_LEN];              
    TPARAMS2 stParams;                                	/*   Params */
    THEADERS2 stHeaders;                              	/*   Headers */
    TCOOKIES2 stCookies;                              	/*   Cookies */
};

/* WAP通信下行包 */
struct tagTWapDownload2
{
    THEADERS2 stHeaders;                              	/*   Headers */
    char szBody[TCONND_WAP_MAX_BODY_LEN];             	/*   Body */
};

struct tagTIPInfo
{
    int16_t nFamily;                                 
    uint16_t wPort;                                  
    tdr_ip_t ulIp;                                   
};

union tagTFrameHeadData
{
    TIPINFO stIPInfo;                                 	/* TFRAMEHEAD_EXTRA_IP,   */
};

struct tagTFrameAuthQQ
{
    uint32_t dwUin;                                  
    int16_t nSigVer;                                  	/*  Ver.12 签名格式版本 */
    uint32_t dwSigTime;                               	/*  Ver.12 签名时间 */
    int16_t nSigLen;                                  	/*  Ver.12 签名长度 */
    uint8_t szSigBuff[TFRAMEHEAD_MAX_SIG_LEN];        	/*  Ver.12 签名内容,详细格式参考即通签名说明文档 */
    uint32_t dwAuthExDataLen;                         	/*  Ver.16 签名附加数据长度 */
    uint8_t szAuthExData[TFRAMEHEAD_MAX_SIG_LEN];     	/*  Ver.16 签名附加数据 */
};

struct tagTFrameAuthAPS
{
    uint16_t wAtkLen;                                 	/*   Atk长度 */
    uint8_t szAtk[TFRAMEHEAD_MAX_SIG_LEN];            	/*   Atk(鉴权票据)内容，注意:无\0结尾 */
    uint32_t dwAtkExpireIn;                           	/*   atk有效期(剩余秒数),0XFFFFFFFF表示无法确定有效期，或没有有效期，0表示已过期 */
    uint16_t wAuthExDataVer;                          	/*   鉴权附加数据版本信息 */
    uint16_t wAuthExDataLen;                          	/*   鉴权附加数据长度 */
    uint8_t szAuthExData[TFRAMEHEAD_MAX_SIG_LEN];     	/*   鉴权附加数据长度 */
};

/* 除了QQV1，QQV2，QQUNIFIED，AP以外的AUTHTYPE都对应AuthService这个鉴权数据结构体 */
union tagTFrameAuthData
{
    TFRAMEAUTHAPS stAuthService;                      	/*  Ver.17  */
    TFRAMEAUTHQQ stAuthQQV1;                          	/* TSF4G_SEC_AUTH_QQV1,   */
    TFRAMEAUTHQQ stAuthQQV2;                          	/* TSF4G_SEC_AUTH_QQV2,   */
    TFRAMEAUTHQQ stAuthQQUnified;                     	/* TSF4G_SEC_AUTH_QQUNIFIED,   */
    TFRAMEAUTHQQ stAuthAp;                            	/* TSF4G_SEC_AUTH_AP,   */
};

struct tagJumpRelayData
{
    uint32_t dwPosition;                              	/*   位置 */
    uint8_t szConnData[TFRAMEHEAD_IDENTITY_LEN];     
};

/* 跨服跳转数据 */
union tagRelayData
{
    JUMPRELAYDATA stJumpRelayData;                    	/* TFRAMEHEAD_RELAYFLAG_JUMP,   */
};

/* 连接建立包 */
struct tagTFrameCmdStart
{
    TFRAMEHEADACCOUNT stUserAccount;                  	/*  Ver.17  */
    uint64_t ullReserved;                             	/*  Ver.18 原来是想用于存放映射后的账号ID，但后来放到ACCOUNT里了，所以这个字段暂无意义 */
    int32_t iAuthType;                                	/*   注意:GCP模式下，请使用UserAccount里面的Type判断平台类型，不要通过AuthType判断，在使用新版的GCP后，该值为-1 Bind Macrosgroup:TSF4G_SEC_AUTH,*/
    TFRAMEAUTHDATA stAuthData;                       
    int32_t iWaitTime;                                	/*   连接排队时间 */
    int32_t iClientType;                              	/*  Ver.16 终端类型 Bind Macrosgroup:TCONNAPI_CLIENT_TYPE,*/
    uint8_t bRelayFlag;                               	/*  Ver.17 特殊连接模式，参考TFRAMEHEAD_RELAYFLAG Bind Macrosgroup:TFRAMEHEAD_RELAYFLAG,*/
    RELAYDATA stRelayData;                            	/*  Ver.26  */
    uint8_t bIsUidNew;                                	/*  Ver.19 当使用账号映射功能时，标识Uid是否第一次被映射出来 */
    TIPINFO stSIPInfo;                                	/* TFRAMEHEAD_EXTRA_IP, Ver.21 TCONND的监听地址 */
    TIPINFO stOriClientIPInfo;                        	/*  Ver.28 在经过某些代理环节(stgw)后，TCONND获取的客户端IP可能是代理层IP，在这种情况下，把获取到的真实IP放在这里 */
};

/* 连接断开包 */
struct tagTFrameCmdStop
{
    int32_t iReason;                                  	/*   TCONND到GAMESVR的STOPREASON 可以参考TFRAMEHEAD_STOP_REASON的定义，GAMESVR下行包的STOPREASON可以自己定义，但注意不要和TCONND的定义冲突，建议从0X1000开始 */
    TFRAMEHEADACCOUNT stUserAccount;                  	/*  Ver.22 stop消息的account只是TCONND上行会填，用于业务透传消息，GAMESVR下行不需要填 */
};

/* 连接标识 */
struct tagTFrameIdent
{
    int32_t iID;                                     
    int32_t iConnIdx;                                
    uint64_t ullExtend;                               	/*  Ver.18  */
    uint64_t ullCallBack;                             	/*  Ver.25 FrameHead里的CallBack信息，在组播包中使用，在Relay包中无意义 */
};

struct tagTFrameCmdInProc
{
    int8_t chValid;                                   	/*   是否组播,0:单播 1:组播 */
    int8_t chNoEnc;                                   	/*   下行包是否加密 */
    int8_t chSendImmediately;                         	/*  Ver.27 在tconnd开启包合并功能时，消息包是否立即发送 */
    uint8_t bHasAccount;                              	/*  Ver.20  */
    TFRAMEHEADACCOUNT stUserAccount;                  	/*  Ver.20  */
    int16_t nCount;                                   	/*   组播个数 */
    TFRAMEIDENT astIdents[TFRAMEHEAD_MAX_BATCH_IDENT];
};

struct tagTFrameCmdMultiCastRemoveGroupReq
{
    char szGroupName[TCONND_MULTICAST_GROUPNAME_LEN];
};

struct tagTFrameCmdMultiCastRemoveGroupResp
{
    char szGroupName[TCONND_MULTICAST_GROUPNAME_LEN];
    int32_t iResult;                                  	/*    Bind Macrosgroup:TCONND_MULTICAST_RESULT,*/
};

struct tagTFrameCmdMultiCastAddIdentReq
{
    char szGroupName[TCONND_MULTICAST_GROUPNAME_LEN];
};

struct tagTFrameCmdMultiCastAddIdentResp
{
    char szGroupName[TCONND_MULTICAST_GROUPNAME_LEN];
    int32_t iResult;                                  	/*    Bind Macrosgroup:TCONND_MULTICAST_RESULT,*/
};

struct tagTFrameCmdMultiCastRemoveIdentReq
{
    char szGroupName[TCONND_MULTICAST_GROUPNAME_LEN];
};

struct tagTFrameCmdMultiCastRemoveIdentResp
{
    char szGroupName[TCONND_MULTICAST_GROUPNAME_LEN];
    int32_t iResult;                                  	/*    Bind Macrosgroup:TCONND_MULTICAST_RESULT,*/
};

struct tagTFrameCmdMultiCastQueryIdentReq
{
    char szGroupName[TCONND_MULTICAST_GROUPNAME_LEN];
};

struct tagTFrameCmdMultiCastQueryIdentResp
{
    int32_t iResult;                                  	/*    Bind Macrosgroup:TCONND_MULTICAST_RESULT,*/
    char szGroupName[TCONND_MULTICAST_GROUPNAME_LEN];
    int32_t iIdentCount;                              	/*   返回的连接信息的数量 */
    TFRAMEIDENT astIdents[TFRAMEHEAD_MAX_BATCH_IDENT];
};

struct tagTFrameCmdMultiCastDeliverMsgReq
{
    char szGroupName[TCONND_MULTICAST_GROUPNAME_LEN]; 	/*   需要发消息的组播组名 */
    int8_t chNoEnc;                                   	/*   下行包是否加密 */
    int8_t chSendImmediately;                         	/*   在tconnd开启包合并功能时，消息包是否立即发送 */
};

struct tagTFrameCmdRelay
{
    uint32_t dwUin;                                  
    int32_t iRelayType;                               	/*    Bind Macrosgroup:TFRAMEHEAD_RELAYTYPE,*/
    TFRAMEIDENT stOld;                               
    TFRAMEIDENT stNew;                               
    TFRAMEHEADACCOUNT stUserAccount;                  	/*  Ver.17  */
    TIPINFO stSIPInfo;                                	/* TFRAMEHEAD_EXTRA_IP, Ver.21  */
};

struct tagTFrameCmdSetRouting
{
    char szSerializerName[SERLIZER_NAME_LEN];         	/*   bus标识名 */
    int32_t iID;                                      	/*   连接在新逻辑服务器上的索引,含义同TFrameHead中的字段 */
    uint64_t ullExtend;                               	/*  Ver.18 连接在新逻辑服务器上的扩展字段,含义同TFrameHead中的字段 */
};

/* 集群化模式下的路由跳转命令 */
struct tagTFrameCmdClusterSetRouting
{
    int32_t iNewID;                                   	/*   连接在新逻辑服务器上的索引,含义同TFrameHead中的字段 */
    uint64_t ullNewExtend;                            	/*   连接新的Extend值 */
    int32_t iRouteType;                               	/*   路由跳转类型 Bind Macrosgroup:TFRAMEHEAD_CLUSTER_SETROUTING_TYPE,*/
    uint64_t ullServerID;                             	/*   跳转的目标路由地址，当RouteType为SPECIFY_SERVER时有意义 */
    uint32_t dwTypeID;                                	/*   跳转的目标Type，当RouteType为SPECIFY_ZONE时有意义 */
    uint32_t dwZoneID;                                	/*   跳转的目标Zone，当RouteType为SPECIFY_ZONE时有意义 */
};

/* 跳转路由回应包 */
struct tagTFrameCmdSetRoutingRsp
{
    int32_t iResult;                                  	/*    Bind Macrosgroup:TFRAMEHEAD_SETROUTING_RESULT,*/
};

/* 集群化模式下的跳转路由回应包 */
struct tagTFrameCmdClusterSetRoutingRsp
{
    int32_t iResult;                                  	/*    Bind Macrosgroup:TFRAMEHEAD_SETROUTING_RESULT,*/
    uint64_t ullTargetServerID;                       	/*   路由跳转的目标地址，在指定区服模式下，最终选定的GAMESVR地址 */
};

/* 跳转路由请求包 */
union tagTRoutingOption
{
    TFRAMECMDSETROUTING stCmdRouting;                 	/* TFRAMEHEAD_SET_ROUTING,   */
};

/* 占位请求包 */
struct tagTFrameCmdNotify
{
    uint32_t dwUin;                                  
    int8_t szConnKey[TFRAMEHEAD_CONNECTKEY_LEN];     
    int8_t szIdentity[TFRAMEHEAD_IDENTITY_LEN];      
    uint8_t bISetRouting;                             	/*   是否设置路由,默认为零暂时不用 */
    TROUTINGOPTION stRouting;                         	/*   路由选项 */
    int8_t chNeedLineUp;                              	/*  Ver.22 是否需要排队，0表示不需要，非0表示需要，默认跨服跳转是不需要排队的 */
};

/* 设置连接限制 */
struct tagTFrameCmdSetConnLimit
{
    char szNetTransName[NETTRANS_NAME_LEN];           	/*   NetTrans名字可选,可以不填 */
    int32_t iPermit;                                  	/*   服务器能处理最大连接数 */
    int32_t iSpeed;                                   	/*   每秒放行连接数，目前该值无意义 */
};

/* 设置连接限制回应包 */
struct tagTFrameCmdSetConnLimitRsp
{
    int32_t iResult;                                  	/*    Bind Macrosgroup:TFRAMEHEAD_SETCONNLIMIT_RESULT,*/
};

/* 交互服务器协议版本 */
struct tagTFrameCmdExgVer
{
    int32_t iVersion;                                 	/*   服务器所使用的协议版本,需要取值宏TDR_METALIB_TFRAMEHEAD_VERSION */
};

/* 请求客户端等待连接数量的应答包 */
struct tagTFrameCmdWaitNumRsp
{
    int32_t iWaitNum;                                 	/*   客户端等待连接数，如果为负数，表明TCONND处理出错 */
};

/* 排队等待控制消息 */
struct tagTFrameCmdSetWaitCtr
{
    int32_t iWaitCtrOn;                               	/*   是否排队控制： 0 - 控制关闭，1 - 打开控制 */
    int32_t iPermitNum;                               	/*   允许放行人数 */
};

/* 服务器注册业务路由参数 */
struct tagTFrameCmdRoutingRegister
{
    int32_t iArgsLen;                                 	/*   应用自定义路由参数的长度 */
    int8_t szRoutingArgs[TFRAMEHEAD_MAX_ROUTING_ARGS_LEN]; 	/*   应用自定义路由参数 */
};

/* WEBGAME通用上行 */
struct tagTFrameCmdWebCommReq
{
    int8_t chUserType;                                	/*    Bind Macrosgroup:TWEB_USERINFO_TYPE,*/
    WEBUSERINFO stUser;                              
};

/* WEBGAME连接开始请求，上行 */
struct tagTFrameCmdWebStartReq
{
    int8_t chUserType;                                	/*    Bind Macrosgroup:TWEB_USERINFO_TYPE,*/
    WEBUSERINFO stUser;                              
    int32_t iWaitTime;                                	/*   连接排队时间,  */
};

/* WEBGAME连接中断，上行 */
struct tagTFrameCmdWebStopReq
{
    int8_t chUserType;                                	/*    Bind Macrosgroup:TWEB_USERINFO_TYPE,*/
    WEBUSERINFO stUser;                              
    int32_t iReason;                                  	/*   中断连接的原因 */
};

/* WEBGAME组播包，下行 */
struct tagTFrameCmdWebBoardcast
{
    int8_t chValid;                                   	/*   无意义，因为本身就是组播消息 */
    int8_t chNoEnc;                                   	/*   下行包是否加密 */
    int16_t nCount;                                   	/*   组播个数 */
    TFRAMEIDENT astIdents[TFRAMEHEAD_MAX_BATCH_IDENT];
};

/* WEBGAME广播包，下行 */
struct tagTFrameCmdWebBroadcastAll
{
    int8_t chValid;                                   	/*   无意义，因为本身就是广播播消息 */
    int8_t chNoEnc;                                   	/*   下行包是否加密 */
};

/* WEBGAME广播应答包，上行 */
struct tagTFrameCmdWebBroadcastAllRsp
{
    int8_t chFailed;                                  	/*   TCONND接收广播包是否成功，0：成功 非0：失败 */
};

struct tagTFrameCmdAuthRefreshNotify
{
    uint16_t wAtkLen;                                 	/*   Atk长度 */
    uint8_t szAtk[TFRAMEHEAD_MAX_SIG_LEN];            	/*   Atk(鉴权票据)内容 */
    uint32_t dwAtkExpireIn;                           	/*   atk有效期 */
    TFRAMEHEADACCOUNT stUserAccount;                  	/*  Ver.24  */
};

struct tagTFrameCmdTconndProbe
{
    uint32_t dwReserved;                              	/*   保留字段 */
};

union tagTFrameCmdData
{
    TFRAMECMDSTART stStart;                           	/* TFRAMEHEAD_CMD_START,  登录请求及应答,双向 */
    TFRAMECMDSTOP stStop;                             	/* TFRAMEHEAD_CMD_STOP,  断开连接,双向 */
    TFRAMECMDINPROC stInProc;                         	/* TFRAMEHEAD_CMD_INPROC,  通信包,双向 */
    TFRAMECMDRELAY stRelay;                           	/* TFRAMEHEAD_CMD_RELAY,  重连请求及应答,双向 */
    TFRAMECMDNOTIFY stNotify;                         	/* TFRAMEHEAD_CMD_NOTIFY,  占位,双向 */
    TFRAMECMDSETROUTING stSetRouting;                 	/* TFRAMEHEAD_CMD_SETROUTING,  跳转路由,单向:SVR->TCONND */
    TFRAMECMDSETROUTINGRSP stSetRoutingRsp;           	/* TFRAMEHEAD_CMD_RSP_SETROUTING,  跳转路由应答,单向:TCONND->SVR */
    TFRAMECMDSETCONNLIMIT stSetConnLimit;             	/* TFRAMEHEAD_CMD_SETCONNLIMIT,  设置连接排队信息,单向:SVR->TCONND */
    TFRAMECMDSETCONNLIMITRSP stSetConnLimitRsp;       	/* TFRAMEHEAD_CMD_RSP_SETCONNLIMIT,  设置连接排队信息应答,单向:TCONND->SVR */
    TFRAMECMDEXGVER stExgVer;                         	/* TFRAMEHEAD_CMD_EXGVER, Ver.12 交互协议版本:双向 */
    TFRAMECMDWAITNUMRSP stWaitNumRsp;                 	/* TFRAMEHEAD_CMD_WAITNUM_RSP, Ver.13 请求客户端等待连接数量的应答 */
    TFRAMECMDSETWAITCTR stSetWaitCtr;                 	/* TFRAMEHEAD_CMD_SET_WAITCTR, Ver.13 排队等待控制消息 */
    TFRAMECMDWEBSTARTREQ stWebStartReq;               	/* TFRAMEHEAD_CMD_WEBSTART,  WEBGAME登录请求，双向 */
    TFRAMECMDWEBCOMMREQ stWebCommReq;                 	/* TFRAMEHEAD_CMD_WEBINPROC,  WEBGAME正常通信请求，上行 */
    TFRAMECMDWEBSTOPREQ stWebStopReq;                 	/* TFRAMEHEAD_CMD_WEBSTOP,  WEBGAME断开连接，上行 */
    TFRAMECMDROUTINGREGISTER stRoutingRegister;       	/* TFRAMEHEAD_CMD_REGISTER_ROUTING, Ver.15 服务器注册业务路由 */
    TFRAMECMDWEBBOARDCAST stWebBoardcast;             	/* TFRAMEHEAD_CMD_WEB_BROADCAST,  WEBGAME组播，下行 */
    TFRAMECMDWEBBROADCASTALL stWebBroadcastAll;       	/* TFRAMEHEAD_CMD_WEB_BROADCAST_ALL, Ver.15 WEBGAME广播，下行 */
    TFRAMECMDWEBBROADCASTALLRSP stWebBroadcastAllRsp; 	/* TFRAMEHEAD_CMD_WEB_BROADCAST_ALL_RSP, Ver.15 WEBGAME广播应答包，上行 */
    TFRAMECMDAUTHREFRESHNOTIFY stAuthRefreshNotify;   	/* TFRAMEHEAD_CMD_AUTH_REFRESH_NOTIFY, Ver.17 续期后通知GAMESVR */
    TFRAMECMDTCONNDPROBE stTconndProbe;               	/* TFRAMEHEAD_CMD_TCONND_PROBE_SVR, Ver.20 TCONND探测后端SVR */
    TFRAMECMDCLUSTERSETROUTING stClusterSetRouting;   	/* TFRAMEHEAD_CMD_CLUSTER_SETROUTING, Ver.25 跳转路由,单向:SVR->TCONND */
    TFRAMECMDCLUSTERSETROUTINGRSP stClusterSetRoutingRsp; 	/* TFRAMEHEAD_CMD_RSP_CLUSTER_SETROUTING, Ver.25 跳转路由应答,单向:TCONND->SVR */
    TFRAMECMDMULTICASTREMOVEGROUPREQ stMulticastRemoveGroupReq; 	/* TFRAMEHEAD_CMD_MULTICAST_REMOVE_GROUP_REQ, Ver.27 删除组播组请求 */
    TFRAMECMDMULTICASTREMOVEGROUPRESP stMulticastRemoveGroupResp; 	/* TFRAMEHEAD_CMD_MULTICAST_REMOVE_GROUP_RESP, Ver.27 删除组播组响应 */
    TFRAMECMDMULTICASTREMOVEIDENTREQ stMulticastRemoveIdentReq; 	/* TFRAMEHEAD_CMD_MULTICAST_REMOVE_IDENT_REQ, Ver.27 从组播组删除连接请求 */
    TFRAMECMDMULTICASTREMOVEIDENTRESP stMulticastRemoveIdentResp; 	/* TFRAMEHEAD_CMD_MULTICAST_REMOVE_IDENT_RESP, Ver.27 从组播组删除连接响应 */
    TFRAMECMDMULTICASTADDIDENTREQ stMulticastAddIdentReq; 	/* TFRAMEHEAD_CMD_MULTICAST_ADD_IDENT_REQ, Ver.27 往组播组添加连接请求 */
    TFRAMECMDMULTICASTADDIDENTRESP stMulticastAddIdentResp; 	/* TFRAMEHEAD_CMD_MULTICAST_ADD_IDENT_RESP, Ver.27 往组播组添加连接响应 */
    TFRAMECMDMULTICASTDELIVERMSGREQ stMulticastDeliverMsgReq; 	/* TFRAMEHEAD_CMD_MULTICAST_DELIVER_MSG_REQ, Ver.27 发送组播消息 */
    TFRAMECMDMULTICASTQUERYIDENTREQ stMulticastQueryIdentReq; 	/* TFRAMEHEAD_CMD_MULTICAST_QUERY_IDENT_REQ, Ver.27 查询组播组内所有连接请求 */
    TFRAMECMDMULTICASTQUERYIDENTRESP stMulticastQueryIdentResp; 	/* TFRAMEHEAD_CMD_MULTICAST_QUERY_IDENT_RESP, Ver.27 查询组播组内所有连接响应 */
    TFRAMECMDWEBBROADCASTALL stBroadcast;             	/* TFRAMEHEAD_CMD_BROADCAST, Ver.27 广播，下行 */
    TFRAMECMDWEBBROADCASTALLRSP stBroadcastRsp;       	/* TFRAMEHEAD_CMD_BROADCAST_RSP, Ver.27 广播应答包，上行 */
};

struct tagTTimeVal
{
    int32_t iSec;                                    
    int32_t iUsec;                                   
};

union tagTTimeStampData
{
    TTIMEVAL stTimeVal;                               	/* TFRAMEHEAD_TIMESTAMP_TIMEVAL,   */
};

struct tagTFrameHead
{
    int8_t chVer;                                     	/*   协议版本信息,取值参考宏TDR_METALIB_TFRAMEHEAD_VERSION,一般要求服务器与TCONND需要先交互协议版本 */
    int8_t chCmd;                                     	/*   协议类型 Bind Macrosgroup:TFRAMEHEAD_CMD_ID,*/
    int8_t chExtraType;                               	/*   是否带连接IP信息,发送给逻辑服务器的第一个包会带上,对于长连接之后不再带 IP信息 */
    int8_t chTimeStampType;                           	/*   是否带时间戳,由tconnd配置 */
    int8_t chFlag;                                    	/*  Ver.14 bit0表示下行包是否可靠,仅对可靠UDP方式有效,其它bit位保留 */
    int32_t iID;                                      	/*   会话ID,由逻辑服务器在start或者relay回包中设置,对于组播包无意义,-1表示后端服务器无会话,否则表示有会话 */
    int32_t iConnIdx;                                 	/*   连接标识,对逻辑服务器只读不能修改,对于组播包忽略该字段 */
    uint64_t ullExtend;                               	/*  Ver.18 为逻辑服务器预留的扩展字段,TCONND会回填GAMESVR最后一个下行包的值,对于组播包无意义; */
    uint32_t dwSeq;                                   	/*  Ver.20 tconnd发送给gamesvr消息的seq，对于上行消息，tconnd会递增，下行消息tconnd不判断 */
    uint64_t ullCallBack;                             	/*  Ver.23 集群化模式下的CallBack数据，在集群化模式下GAMESVR在发下行包时，需要将值填为最后一个上行包的值，非集群化模式不用处理，             该字段在CLUSTER_AGENT和GAMESVR之间表示TCONND地址，在TCONND和CLUSTER_AGENT之间表示GAMESVR的地址 */
    TFRAMEHEADDATA stExtraInfo;                       	/*   连接 IP信息 */
    TTIMESTAMPDATA stTimeStamp;                       	/*   时间戳信息 */
    TFRAMECMDDATA stCmdData;                          	/*   协议数据 */
};

#pragma pack()


#endif /* TFRAMEHEAD_H_ */
